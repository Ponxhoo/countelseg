<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visor de PDF - Countelseg</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <ul class="navlist">
                <li><a href="#" onclick="openTab('firmar')">Firmar</a></li>
                <li><a href="#" onclick="openTab('perfil')">Perfil</a></li>
                <li><a href="#" onclick="openTab('funcionamiento')">Funcionamiento</a></li>
                <li><a href="#" onclick="openTab('firmas')">Firmas guardadas</a></li>
                <li style="float:right;"><a href="#" onclick="logout()">Salir</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <!-- Pestaña Firmar -->
        <div id="firmar" class="tabcontent">
            <div id="uploadSignatureSection" class="card">
                <h2>Subir Firma Electrónica</h2>
                <input type="file" id="signatureFile" class="rounded-input" accept=".p12">
                <input type="password" id="signaturePassword" class="rounded-input" placeholder="Clave de firma">
                <button id="uploadSignatureButton">Aceptar</button>
            </div>

            <div id="uploadPDF" class="card" style="display: none;">
                <h2>Subir PDF para Firmar</h2>
                <input type="file" id="pdfFile" class="rounded-input" accept=".pdf">
                <button onclick="openPDFViewer()">Visualizar y firmar PDF</button>
            </div>
			 <div id="pdfViewerContainer" style="display: none;">
            <iframe id="pdfViewerFrame" style="width: 100%; height: 600px;" frameborder="0"></iframe>
            
        </div>
 

            <div id="certificateDetails" style="display: none;">
                <h2>Datos del Certificado</h2>
                <p><strong>Nombre del Titular:</strong> <span id="nombreCertificado"></span></p>
                <p><strong>Identificación:</strong> <span id="identificacionCertificado"></span></p>
                <p><strong>Entidad Certificadora:</strong> <span id="entidadCertificadora"></span></p>
                <p><strong>Fecha de Emisión:</strong> <span id="emitidoCertificado"></span></p>
                <p><strong>Fecha de Vencimiento:</strong> <span id="fechaVencimientoCertificado"></span></p>
            </div>
        </div>

        <!-- Pestaña Perfil -->
        <div id="perfil" class="tabcontent" style="display:none;">
            <div class="card">
                <h2>Perfil de Usuario</h2>
                <p><strong>Nombre:</strong> <span id="fullName"></span></p>
                <p><strong>Correo Electrónico:</strong> <span id="email"></span></p>
                <p><strong>Cédula:</strong> <span id="documentId"></span></p>
                <button onclick="changePassword()">Cambiar Contraseña</button>
            </div>
        </div>

        <!-- Pestaña Funcionamiento -->
        <div id="funcionamiento" class="tabcontent" style="display:none;">
            <div class="card">
                <h2>Funcionamiento de Countelseg Firmas Electrónicas</h2>
                <p>Aquí va la información sobre cómo funciona Countelseg Firmas Electrónicas.</p>
            </div>
        </div>

        <!-- Pestaña Firmas guardadas -->
        <div id="firmas" class="tabcontent" style="display:none;">
            <div class="card">
                <h2>Firmas Guardadas</h2>
                <div id="signaturesList"></div>
                <button onclick="loadSignatures()">Cargar Firmas</button>
            </div>
        </div>

        <!-- Formulario de cambio de contraseña -->
        <div id="changePasswordForm" class="tabcontent" style="display:none;">
            <div class="card">
                <h2>Cambiar Contraseña</h2>
                <input type="password" id="currentPassword" class="rounded-input" placeholder="Contraseña Actual">
                <input type="password" id="newPassword" class="rounded-input" placeholder="Nueva Contraseña">
                <input type="password" id="confirmNewPassword" class="rounded-input" placeholder="Confirmar Nueva Contraseña">
                <button onclick="submitChangePassword()">Guardar Cambios</button>
            </div>
        </div>
    </div>
    <div id="errorContainer" style="display: none; color: red;"></div>

    <script src="firmaEC.js"></script>
    <script src="signatures.js"></script>
</body>
</html>
